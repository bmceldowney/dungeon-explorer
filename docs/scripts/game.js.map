{"version":3,"sources":["webpack:///webpack/bootstrap a3954c5fb4c866bc0799","webpack:///./scripts/index.js","webpack:///./scripts/states/index.js","webpack:///./scripts/states/Gameplay.js","webpack:///./scripts/states/_State.js","webpack:///./scripts/actors/index.js","webpack:///./scripts/actors/Player.js","webpack:///./scripts/actors/_Actor.js","webpack:///./scripts/constants/index.js","webpack:///./scripts/behaviors/index.js","webpack:///./scripts/behaviors/PlayerBehaviorManager.js","webpack:///./scripts/behaviors/_BehaviorManager.js","webpack:///./scripts/services/index.js","webpack:///./scripts/services/pathfinding.js","webpack:///../~/easystarjs/src/easystar.js","webpack:///../~/easystarjs/src/instance.js","webpack:///../~/easystarjs/src/node.js","webpack:///../~/heap/index.js","webpack:///../~/heap/lib/heap.js","webpack:///./scripts/services/scheduling.js","webpack:///./scripts/services/gameContext.js","webpack:///./scripts/services/visibility.js","webpack:///./scripts/actions/index.js","webpack:///./scripts/actions/MoveAction.js","webpack:///./scripts/actions/_Action.js","webpack:///./scripts/actions/PauseForInputAction.js","webpack:///./scripts/actions/WaitAction.js","webpack:///./scripts/actors/Rat.js","webpack:///./scripts/sprites/index.js","webpack:///./scripts/sprites/PlayerSprite.js","webpack:///./scripts/sprites/_Sprite.js","webpack:///./scripts/sprites/RatSprite.js","webpack:///./scripts/sprites/ChestSprite.js","webpack:///./scripts/levels/index.js","webpack:///./scripts/levels/PrefabLevel.js","webpack:///./scripts/levels/_Level.js","webpack:///./scripts/groups/index.js","webpack:///./scripts/groups/Enemies.js","webpack:///./scripts/groups/Items.js","webpack:///./scripts/items/index.js","webpack:///./scripts/items/Chest.js","webpack:///./scripts/items/_Item.js","webpack:///./scripts/states/Loading.js","webpack:///./scripts/fonts/index.js","webpack:///./scripts/fonts/MenuFont.js","webpack:///./scripts/fonts/_BitmapFont.js","webpack:///./scripts/ui/index.js","webpack:///./scripts/ui/components/menu.js","webpack:///./scripts/states/Menu.js"],"names":["width","height","renderer","Phaser","AUTO","parent","defaultState","transparent","antialias","physicsConfig","game","Game","loading","state","module","exports","stateManager","changeState","menu","gameplay","createState","checkState","name","add","start","Gameplay","path","playerTarget","context","level","getLevel","init","pathfinding","addMap","console","log","playerObj","getPlayerPosition","player","x","y","world","enemies","initEnemies","getEnemies","items","initItems","getItems","camera","follow","sprite","Camera","FOLLOW_LOCKON","input","activePointer","leftButton","onUp","pointerClicked","loadLevel","scheduling","addActor","visibility","update","ticked","forEach","enemy","tile","pointToTile","getCenteredPosition","renderable","isTileVisible","updateTiles","evt","wheelDelta","mouse","scale","setGameSize","refresh","btn","point","Point","Math","floor","worldX","worldY","findPath","result","length","destinationPath","map","layer","data","row","tileToPoint","properties","visible","alpha","revealed","dirty","mouseX","snapTo","TILEWIDTH","mouseY","TILEHEIGHT","worldPos","worldPosition","pixOffsetX","pixOffsetY","debug","pixel","_State","stateProvider","State","group","rat","Player","pathfinder","playerTile","position","MOVE_DURATION","MOVE_DISTANCE","Actor","behaviorManager","actor","canMove","isAlive","body","onMoveComplete","animations","play","_updatePostion","kill","facing","animation","promiseResolve","promise","Promise","resolve","addOnce","moveTo","angle","abs","move","action","getAction","execute","_waitForInput","promiseReject","interval","setInterval","clearInterval","then","catch","reason","reject","SPRITEKEY","PlayerBehaviorManager","parse","_BehaviorManager","_getAction","easystar","js","mapData","enableDiagonals","countContiguousTiles","playerSprite","gridSize","visitedTiles","tileQueue","currentTile","tileCount","queueAdjacentTiles","unshift","i","pop","startPosition","destinationPosition","callback","actorTile","targetTile","calculate","grid","getGrid","walkables","getWalkables","setGrid","setAcceptableTiles","obj","item","EasyStar","Instance","require","Node","Heap","CLOSED_LIST","OPEN_LIST","STRAIGHT_COST","DIAGONAL_COST","syncEnabled","pointsToAvoid","collisionGrid","costMap","pointsToCost","directionalConditions","allowCornerCutting","iterationsSoFar","instances","iterationsPerCalculation","Number","MAX_VALUE","acceptableTiles","diagonalsEnabled","tiles","Array","isNaN","parseFloat","isFinite","enableSync","disableSync","disableDiagonals","setTileCost","tileType","cost","setAdditionalPointCost","removeAdditionalPointCost","removeAllAdditionalPointCosts","setDirectionalCondition","allowedDirections","removeAllDirectionalConditions","setIterationsPerCalculation","iterations","avoidAdditionalPoint","stopAvoidingAdditionalPoint","enableCornerCutting","disableCornerCutting","stopAvoidingAllAdditionalPoints","startX","startY","endX","endY","callbackWrapper","setTimeout","undefined","Error","endTile","isAcceptable","instance","openList","nodeA","nodeB","bestGuessDistance","isDoneCalculating","nodeHash","push","coordinateToNode","size","ic","shift","searchNode","reverse","ip","tilesToSearch","list","getTileCost","isTileWalkable","checkAdjacentNode","adjacentCoordinateX","adjacentCoordinateY","node","costSoFar","updateItem","sourceNode","direction","calculateDirection","directionIncluded","diffX","diffY","BOTTOM","BOTTOM_LEFT","LEFT","TOP_LEFT","TOP","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","simpleDistanceToTarget","getDistance","x1","y1","x2","y2","dx","dy","defaultCmp","heapify","heappop","heappush","heappushpop","heapreplace","insort","min","nlargest","nsmallest","_siftdown","_siftup","a","lo","hi","cmp","mid","splice","apply","concat","array","lastelt","returnitem","_ref","_i","_j","_len","_ref1","_results","_results1","pos","indexOf","n","elem","slice","sort","los","startpos","newitem","parentpos","childpos","endpos","rightpos","replace","pushpop","nodes","prototype","peek","contains","clear","empty","clone","heap","toArray","insert","top","front","has","copy","root","factory","call","scheduler","ROT","Scheduler","Action","PAUSE_RETRY","pauseCount","Signal","_tick","pause","continue","current","next","act","duration","getTime","setDuration","dispatch","initialContext","isBlocked","health","speed","getTile","fov","FOV","PreciseShadowcasting","walkable","blockLOS","compute","r","pauseForInput","wait","MoveAction","payload","moveSpeed","radToDeg","angleBetweenPoints","moveAngle","_Action","_execute","DURATION","PauseForInputAction","WaitAction","Rat","chest","PlayerSprite","physics","enable","anchorX","anchorY","_Sprite","key","frame","adjustedX","adjustedY","anchor","setTo","Sprite","RatSprite","ChestSprite","levelConfig","buildPrefabLevel","levelName","PrefabLevel","tilemap","layers","tilesets","addTilesetImage","tileSet","createLayer","resizeWorld","prop","tileProperties","hasOwnProperty","tileGid","firstgid","parseInt","column","index","findObjectsByName","findObjectsByType","objectType","objects","objectLayer","filter","type","objectName","_Level","_subAddMap","Enemies","enemyObj","enemyObjs","initEnemy","Group","itemObj","itemObjs","initItem","Chest","contents","isOpen","_Item","Loading","scaleMode","ScaleManager","SHOW_ALL","pageAlignHorizontally","pageAlignVertically","renderSession","roundPixels","Canvas","setImageRenderingCrisp","canvas","keyboard","addKeyCapture","Keyboard","SPACEBAR","load","loadResources","image","Tilemap","TILED_JSON","spritesheet","loader","loadResource","text","align","font","KEY","FONT","MAP","MenuFont","bitmapFont","_BitmapFont","value","__align","BitmapText","menuScreen","uiAssets","asset","onLoadComplete","EZGUI","Compatibility","fixCache","Theme","create","onStart","cb","components","startBtn","on","id","component","draggable","layout","children","Menu"],"mappings":"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","file":"scripts/game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a3954c5fb4c866bc0799\n **/","import States from './states';\n\nconst width = 643;\nconst height = 340;\nconst renderer = Phaser.AUTO;\nconst parent = 'content';\nconst defaultState = null;\nconst transparent = false;\nconst antialias = false;\nconst physicsConfig = null;\nconst game = new Phaser.Game(\n    width,\n    height,\n    renderer,\n    parent,\n    defaultState,\n    transparent,\n    antialias,\n    physicsConfig\n);\n\nStates.loading(game.state);\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/index.js\n **/","import Gameplay from './Gameplay';\nimport Loading from './Loading';\nimport Menu from './Menu';\n\nmodule.exports = {\n    loading: function loading (stateManager) {\n        changeState(stateManager, Loading);\n    },\n\n    menu: function menu (stateManager) {\n        changeState(stateManager, Menu);\n    },\n\n    gameplay: function gameplay (stateManager) {\n        changeState(stateManager, Gameplay);\n    }\n};\n\n/**\n* This weird little work-around is here because I wasn't able to import\n* index.js into files in the same directory. Injecting the module via\n* each state's constructor felt OKAY, but I'd love to understand more.\n*/\nfunction createState (state) {\n    return new state(module.exports);\n}\n\nfunction changeState (stateManager, state) {\n    if (stateManager.checkState(state.name) != true) {\n        stateManager.add(state.name, createState(state));\n    }\n    stateManager.start(state.name);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/index.js\n **/","import _State from './_State'\nimport actors from '../actors'\nimport levels from '../levels'\nimport services from '../services'\nimport constants from '../constants'\nimport groups from '../groups'\nimport items from '../items'\n\nexport default class Gameplay extends _State {\n    constructor () {\n        super()\n        this.path = []\n        this.playerTarget = null\n    }\n\n    preload () {\n        this.context = services.context()\n\n        this.level = levels.getLevel(this.game)\n        this.context.init(this.game)\n    }\n\n    create () {\n        const context = this.game.context\n        this.pathfinding = services.pathfinding()\n\n        this.level.addMap()\n        console.log(this.level)\n\n        const playerObj = this.level.getPlayerPosition()\n\n        this.player = actors.player(this.game, playerObj.x, playerObj.y, this.world)\n        this.enemies = groups.enemies(this.game)\n        this.enemies.initEnemies(this.level.getEnemies())\n\n        this.items = groups.items(this.game)\n        this.items.initItems(this.level.getItems())\n\n        this.camera.follow(this.player.sprite, Phaser.Camera.FOLLOW_LOCKON)\n\n        this.game.input.activePointer.leftButton.onUp.add(this.pointerClicked, this)\n\n        this.pathfinding.loadLevel(this.level)\n        this.scheduling = services.scheduling()\n\n        this.scheduling.addActor(this.player)\n        this.scheduling.start()\n\n        this.visibility = services.visibility()\n        this.visibility.update(this.player, this.level)\n\n        this.scheduling.ticked.add(() => {\n            // hide enemies and items that are not in LoS\n            this.enemies.forEach((enemy) => {\n                const tile = this.pathfinding.pointToTile(this.pathfinding.getCenteredPosition(enemy))\n                enemy.renderable = this.level.isTileVisible(tile.x, tile.y)\n            })\n\n            this.visibility.update(this.player, this.level)\n            this.updateTiles()\n        })\n\n        // this.game.input.mouse.mouseWheelCallback = this.onMouseWheel\n        this.updateTiles()\n    }\n\n    onMouseWheel (evt) {\n        const wheelDelta = evt.wheelDelta\n        // console.dir(this.game.input.mouse.wheelDelta)\n        const width = this.game.width + (this.game.input.mouse.wheelDelta * 5)\n        const height = width * 0.625\n        // console.log(`width: ${this.game.canvas.width}`)\n        // console.log(`height: ${this.game.canvas.height}`)\n        this.game.scale.setGameSize(width, height)\n        this.game.scale.refresh()\n        // this.game.world.scale.set(this.game.input.mouse.wheelDelta / 10)\n\n        // console.dir(this.game.world.scale)\n        // const zoomAmount = this.game.input.mouse.wheelDelta / 4\n        //\n        // this.game.camera.scale.x += zoomAmount\n        // this.game.camera.scale.y += zoomAmount\n\n        // this.game.camera.bounds.x = size.x * this.game.camera.scale.x\n        // this.game.camera.bounds.y = size.y * this.game.camera.scale.y\n        // this.game.camera.bounds.width = size.width * this.game.camera.scale.x\n        // this.game.camera.bounds.height = size.height * this.game.camera.scale.y\n        // this.game.camera.bounds.width = this.game.width * this.game.camera.scale.x\n        // this.game.camera.bounds.height = this.game.height * this.game.camera.scale.y\n    }\n\n\n    pointerClicked (btn) {\n        const point = new Phaser.Point(Math.floor(btn.parent.worldX), Math.floor(btn.parent.worldY))\n\n        this.pathfinding.findPath(this.pathfinding.getCenteredPosition(this.player), point, result => {\n            if (result && result.length) {\n                this.game.context.player.destinationPath = result\n            }\n        })\n    }\n\n    updateTiles () {\n        this.level.map.layer.data.forEach((row) => {\n            row.forEach((tile) => {\n\n                const point = this.pathfinding.tileToPoint({ x: tile.x, y: tile.y })\n\n                if (tile.properties.visible) {\n                    tile.alpha = 1\n                } else if (tile.properties.revealed) {\n                    tile.alpha = 0.35\n                } else {\n                    tile.alpha = 0\n                }\n            })\n        })\n\n        this.level.map.layer.dirty = true\n    }\n\n    render () {\n        const mouseX = Phaser.Math.snapTo(Math.floor(this.game.input.activePointer.worldX - (constants.TILEWIDTH / 2)), constants.TILEWIDTH)\n        const mouseY = Phaser.Math.snapTo(Math.floor(this.game.input.activePointer.worldY - (constants.TILEHEIGHT / 2)), constants.TILEHEIGHT)\n        const worldPos = this.game.world.worldPosition\n\n        const pixOffsetX = constants.TILEWIDTH - 2\n        const pixOffsetY = constants.TILEHEIGHT - 2\n        const x = mouseX + worldPos.x\n        const y = mouseY + worldPos.y\n\n        this.game.debug.pixel(x, y)\n        this.game.debug.pixel(x + pixOffsetX, y)\n        this.game.debug.pixel(x, y + pixOffsetY)\n        this.game.debug.pixel(x + pixOffsetX, y + pixOffsetY)\n\n        // if (this.path) {\n        //   this.path.forEach(tile => {\n        //     const point = this.pathfinding.tileToPoint(tile)\n        //     this.game.debug.pixel(point.x + worldPos.x, point.y + worldPos.y, '#00FF00', constants.TILEWIDTH)\n        //   })\n        // }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Gameplay.js\n **/","export default class _State extends Phaser.State {\n    constructor (stateProvider) {\n        super();\n        this.stateProvider = stateProvider;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/_State.js\n **/","import Player from './Player';\nimport Rat from './Rat';\nimport Sprites from '../sprites';\n\nmodule.exports = {\n    player: function player (game, x, y, group = null) {\n        var sprite = Sprites.player(game, x, y);\n        var player = new Player(game, sprite);\n\n        if (group) {\n            group.add(player.sprite);\n        }\n\n        return player;\n    },\n\n    rat: function rat (game, x, y, group = null) {\n        var sprite = Sprites.rat(game, x, y);\n        var rat = new Rat(game, sprite);\n\n        if (group) {\n            group.add(rat.sprite);\n        }\n\n        return rat;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actors/index.js\n **/","import _Actor from './_Actor';\nimport behaviors from '../behaviors'\nimport services from '../services'\n\nexport default class Player extends _Actor {\n    constructor (game, sprite) {\n        super(game, sprite, behaviors.player(game));\n    }\n\n    _updatePostion () {\n        const pathfinder = services.pathfinding()\n        const playerTile = pathfinder.pointToTile(pathfinder.getCenteredPosition(this))\n        this.game.context.player.position = playerTile\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actors/Player.js\n **/","import constants from '../constants'\n\nconst MOVE_DURATION = 75\nconst MOVE_DISTANCE = constants.TILEWIDTH\n\nexport default class Actor {\n    constructor (game, sprite, behaviorManager) {\n        this.game = game\n        this.sprite = sprite\n        this.behaviorManager = behaviorManager\n        this.behaviorManager.actor = this\n\n        this.canMove = true\n        this.isAlive = true\n\n        this.sprite.body.onMoveComplete.add(() => {\n            this.sprite.body.x = Phaser.Math.snapTo(this.sprite.body.x, constants.TILEWIDTH)\n            this.sprite.body.y = Phaser.Math.snapTo(this.sprite.body.y, constants.TILEHEIGHT)\n            this.canMove = true\n            this.sprite.animations.play('idle')\n            this._updatePostion()\n        })\n    }\n\n    get moveSpeed () {\n        return 1\n    }\n\n    kill () {\n        this.sprite.kill()\n        this.isAlive = false\n    }\n\n    move (facing, animation) {\n        let promiseResolve\n        const promise = new Promise(resolve => promiseResolve = resolve)\n\n        if (this.canMove == false) {\n            return promise\n        }\n\n        if (animation) {\n            this.sprite.animations.play(animation)\n        }\n\n        this.canMove = false\n        this.sprite.body.onMoveComplete.addOnce(promiseResolve)\n        this.sprite.body.moveTo(MOVE_DURATION, MOVE_DISTANCE, facing)\n\n        return promise\n    }\n\n    attack () {\n        this.sprite.animations.play('attack')\n    }\n\n    moveAngle (angle) {\n        if (Math.abs(angle) > 90) {\n            this.sprite.scale.x = 1\n        } else if (Math.abs(angle) < 90) {\n            this.sprite.scale.x = -1\n        }\n\n        return this.move(angle, 'walk')\n    }\n\n    act () {\n        let action = this.behaviorManager.getAction()\n\n        if (action) {\n            return action.execute()\n        } else {\n            return this._waitForInput()\n        }\n    }\n\n    _waitForInput () {\n        let promiseResolve\n        let promiseReject\n\n        const interval = setInterval(() => {\n            let action = this.behaviorManager.getAction()\n\n            if (action) {\n                clearInterval(interval)\n                action.execute()\n                    .then(result => promiseResolve(result))\n                    .catch(reason => promiseReject(reason))\n            }\n        }, 250)\n\n        return new Promise((resolve, reject) => {\n            promiseResolve = resolve\n            promiseReject = reject\n        })\n    }\n\n    _updatePostion () {\n        // noop\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actors/_Actor.js\n **/","export default {\n    TILEWIDTH: 16,\n    TILEHEIGHT: 16,\n    SPRITEKEY: 'spriteKey'\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/constants/index.js\n **/","import PlayerBehaviorManager from './PlayerBehaviorManager'\n\nexport default {\n    player: (game) => {\n        return new PlayerBehaviorManager(game)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/behaviors/index.js\n **/","import _BehaviorManager from './_BehaviorManager'\nimport services from '../services'\nimport actions from '../actions'\n\nexport default class PlayerBehaviorManager extends _BehaviorManager {\n    constructor (game) {\n        super(game)\n        this.pathfinder = services.pathfinding()\n    }\n\n    _getAction () {\n        let action = null\n        const position = Phaser.Point.parse(this.game.context.player.position)\n        const destinationPath = this.game.context.player.destinationPath\n\n        if (destinationPath.length > 0) {\n            action = actions.move(this.game, this.actor, { position, destinationPath })\n        }\n\n        return action\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/behaviors/PlayerBehaviorManager.js\n **/","export default class _BehaviorManager {\n    constructor (game) {\n        this.game = game\n    }\n\n    getAction () {\n        return this._getAction()\n    }\n\n    _getAction () {\n        console.log('this should never fire')\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/behaviors/_BehaviorManager.js\n **/","import pathfinding from './pathfinding'\nimport scheduling from './scheduling'\nimport gameContext from './gameContext'\nimport visibility from './visibility'\n\nexport default {\n    pathfinding: () => {\n        return pathfinding\n    },\n    scheduling: () => {\n      return scheduling\n    },\n    context: () => {\n        return gameContext\n    },\n    visibility: () => {\n        return visibility\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services/index.js\n **/","import Easystar from 'easystarjs'\nimport constants from '../constants'\n\nlet easystar = new Easystar.js()\nlet mapData = []\n\neasystar.enableDiagonals()\n\nfunction pointToTile (point) {\n    return new Phaser.Point(Phaser.Math.snapTo(Math.floor(point.x - (constants.TILEWIDTH / 2)), constants.TILEWIDTH) / constants.TILEWIDTH, Phaser.Math.snapTo(Math.floor(point.y - (constants.TILEHEIGHT / 2)), constants.TILEHEIGHT) / constants.TILEHEIGHT)\n}\n\nfunction tileToPoint (point) {\n    return new Phaser.Point(Math.floor(point.x * constants.TILEWIDTH), Math.floor(point.y * constants.TILEHEIGHT))\n}\n\nexport default {\n    // uses a flood-fill to determine the area of an enclosed space\n    // currently assumes 0 is passable and 1 is blocked\n    // TODO: modify to use the walkables list\n    countContiguousTiles: (playerSprite, gridSize) => {\n        const visitedTiles = []\n        const tileQueue = []\n        let currentTile = pointToTile(playerSprite.body.position)\n        let tileCount = 1\n\n        function queueAdjacentTiles (tile) {\n            visitedTiles[tile.y][tile.x] = true\n\n            if (mapData[tile.y][tile.x - 1] === 0 && !visitedTiles[tile.y][tile.x - 1]) {\n                tileQueue.unshift({ x: tile.x - 1, y: tile.y })\n                visitedTiles[tile.y][tile.x - 1] = true\n            }\n            if (mapData[tile.y][tile.x + 1] === 0 && !visitedTiles[tile.y][tile.x + 1]) {\n                visitedTiles[tile.y][tile.x + 1] = true\n                tileQueue.unshift({ x: tile.x + 1, y: tile.y })\n            }\n            if (mapData[tile.y - 1][tile.x] === 0 && !visitedTiles[tile.y - 1][tile.x]) {\n                visitedTiles[tile.y - 1][tile.x] = true\n                tileQueue.unshift({ x: tile.x, y: tile.y - 1 })\n            }\n            if (mapData[tile.y + 1][tile.x] === 0 && !visitedTiles[tile.y + 1][tile.x]) {\n                tileQueue.unshift({ x: tile.x, y: tile.y + 1 })\n                visitedTiles[tile.y + 1][tile.x] = true\n            }\n        }\n\n        for (let i = 0; i < mapData.length; i++) {\n            visitedTiles[i] = []\n        }\n\n        queueAdjacentTiles(currentTile)\n\n        while (tileQueue.length) {\n            console.log('queue length: ' + tileQueue.length)\n            if (mapData[currentTile.y][currentTile.x] === 0) {\n                console.log('x: ' + currentTile.x + ', y: ' + currentTile.y)\n                tileCount++\n            }\n\n            currentTile = tileQueue.pop()\n            queueAdjacentTiles(currentTile)\n        }\n\n        return tileCount\n    },\n\n    findPath: (startPosition, destinationPosition, callback) => {\n        const actorTile = pointToTile(startPosition)\n        const targetTile = pointToTile(destinationPosition)\n\n        easystar.findPath(actorTile.x, actorTile.y, targetTile.x, targetTile.y, callback)\n        easystar.calculate()\n    },\n\n    // used to load tilemap data that was generated in Tiled\n    loadLevel: (level) => {\n        const grid = level.getGrid()\n        const walkables = level.getWalkables()\n\n        easystar.setGrid(grid)\n        easystar.setAcceptableTiles(walkables)\n    },\n\n    getCenteredPosition: (obj) => {\n        let item = obj\n        if (obj.sprite) {\n            item = obj.sprite\n        }\n\n        return new Phaser.Point(Math.floor(item.body.x + (constants.TILEWIDTH / 2)), Math.floor(item.body.y + (constants.TILEHEIGHT / 2)))\n    },\n\n    pointToTile: pointToTile,\n\n    tileToPoint: tileToPoint\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services/pathfinding.js\n **/","/**\n*   EasyStar.js\n*   github.com/prettymuchbryce/EasyStarJS\n*   Licensed under the MIT license.\n*\n*   Implementation By Bryce Neal (@prettymuchbryce)\n**/\n\nvar EasyStar = {}\nvar Instance = require('./instance');\nvar Node = require('./node');\nvar Heap = require('heap');\n\nconst CLOSED_LIST = 0;\nconst OPEN_LIST = 1;\n\nmodule.exports = EasyStar;\n\nEasyStar.js = function() {\n    var STRAIGHT_COST = 1.0;\n    var DIAGONAL_COST = 1.4;\n    var syncEnabled = false;\n    var pointsToAvoid = {};\n    var collisionGrid;\n    var costMap = {};\n    var pointsToCost = {};\n    var directionalConditions = {};\n    var allowCornerCutting = true;\n    var iterationsSoFar;\n    var instances = [];\n    var iterationsPerCalculation = Number.MAX_VALUE;\n    var acceptableTiles;\n    var diagonalsEnabled = false;\n\n    /**\n    * Sets the collision grid that EasyStar uses.\n    *\n    * @param {Array|Number} tiles An array of numbers that represent\n    * which tiles in your grid should be considered\n    * acceptable, or \"walkable\".\n    **/\n    this.setAcceptableTiles = function(tiles) {\n        if (tiles instanceof Array) {\n            // Array\n            acceptableTiles = tiles;\n        } else if (!isNaN(parseFloat(tiles)) && isFinite(tiles)) {\n            // Number\n            acceptableTiles = [tiles];\n        }\n    };\n\n    /**\n    * Enables sync mode for this EasyStar instance..\n    * if you're into that sort of thing.\n    **/\n    this.enableSync = function() {\n        syncEnabled = true;\n    };\n\n    /**\n    * Disables sync mode for this EasyStar instance.\n    **/\n    this.disableSync = function() {\n        syncEnabled = false;\n    };\n\n    /**\n     * Enable diagonal pathfinding.\n     */\n    this.enableDiagonals = function() {\n        diagonalsEnabled = true;\n    }\n\n    /**\n     * Disable diagonal pathfinding.\n     */\n    this.disableDiagonals = function() {\n        diagonalsEnabled = false;\n    }\n\n    /**\n    * Sets the collision grid that EasyStar uses.\n    *\n    * @param {Array} grid The collision grid that this EasyStar instance will read from.\n    * This should be a 2D Array of Numbers.\n    **/\n    this.setGrid = function(grid) {\n        collisionGrid = grid;\n\n        //Setup cost map\n        for (var y = 0; y < collisionGrid.length; y++) {\n            for (var x = 0; x < collisionGrid[0].length; x++) {\n                if (!costMap[collisionGrid[y][x]]) {\n                    costMap[collisionGrid[y][x]] = 1\n                }\n            }\n        }\n    };\n\n    /**\n    * Sets the tile cost for a particular tile type.\n    *\n    * @param {Number} The tile type to set the cost for.\n    * @param {Number} The multiplicative cost associated with the given tile.\n    **/\n    this.setTileCost = function(tileType, cost) {\n        costMap[tileType] = cost;\n    };\n\n    /**\n    * Sets the an additional cost for a particular point.\n    * Overrides the cost from setTileCost.\n    *\n    * @param {Number} x The x value of the point to cost.\n    * @param {Number} y The y value of the point to cost.\n    * @param {Number} The multiplicative cost associated with the given point.\n    **/\n    this.setAdditionalPointCost = function(x, y, cost) {\n        pointsToCost[x + '_' + y] = cost;\n    };\n\n    /**\n    * Remove the additional cost for a particular point.\n    *\n    * @param {Number} x The x value of the point to stop costing.\n    * @param {Number} y The y value of the point to stop costing.\n    **/\n    this.removeAdditionalPointCost = function(x, y) {\n        delete pointsToCost[x + '_' + y];\n    }\n\n    /**\n    * Remove all additional point costs.\n    **/\n    this.removeAllAdditionalPointCosts = function() {\n        pointsToCost = {};\n    }\n\n    /**\n    * Sets a directional condition on a tile\n    *\n    * @param {Number} x The x value of the point.\n    * @param {Number} y The y value of the point.\n    * @param {Array.<String>} allowedDirections A list of all the allowed directions that can access\n    * the tile.\n    **/\n    this.setDirectionalCondition = function(x, y, allowedDirections) {\n        directionalConditions[x + '_' + y] = allowedDirections;\n    };\n\n    /**\n    * Remove all directional conditions\n    **/\n    this.removeAllDirectionalConditions = function() {\n        directionalConditions = {};\n    };\n\n    /**\n    * Sets the number of search iterations per calculation.\n    * A lower number provides a slower result, but more practical if you\n    * have a large tile-map and don't want to block your thread while\n    * finding a path.\n    *\n    * @param {Number} iterations The number of searches to prefrom per calculate() call.\n    **/\n    this.setIterationsPerCalculation = function(iterations) {\n        iterationsPerCalculation = iterations;\n    };\n\n    /**\n    * Avoid a particular point on the grid,\n    * regardless of whether or not it is an acceptable tile.\n    *\n    * @param {Number} x The x value of the point to avoid.\n    * @param {Number} y The y value of the point to avoid.\n    **/\n    this.avoidAdditionalPoint = function(x, y) {\n        pointsToAvoid[x + \"_\" + y] = 1;\n    };\n\n    /**\n    * Stop avoiding a particular point on the grid.\n    *\n    * @param {Number} x The x value of the point to stop avoiding.\n    * @param {Number} y The y value of the point to stop avoiding.\n    **/\n    this.stopAvoidingAdditionalPoint = function(x, y) {\n        delete pointsToAvoid[x + \"_\" + y];\n    };\n\n    /**\n    * Enables corner cutting in diagonal movement.\n    **/\n    this.enableCornerCutting = function() {\n        allowCornerCutting = true;\n    };\n\n    /**\n    * Disables corner cutting in diagonal movement.\n    **/\n    this.disableCornerCutting = function() {\n        allowCornerCutting = false;\n    };\n\n    /**\n    * Stop avoiding all additional points on the grid.\n    **/\n    this.stopAvoidingAllAdditionalPoints = function() {\n        pointsToAvoid = {};\n    };\n\n    /**\n    * Find a path.\n    *\n    * @param {Number} startX The X position of the starting point.\n    * @param {Number} startY The Y position of the starting point.\n    * @param {Number} endX The X position of the ending point.\n    * @param {Number} endY The Y position of the ending point.\n    * @param {Function} callback A function that is called when your path\n    * is found, or no path is found.\n    *\n    **/\n    this.findPath = function(startX, startY, endX, endY, callback) {\n        // Wraps the callback for sync vs async logic\n        var callbackWrapper = function(result) {\n            if (syncEnabled) {\n                callback(result);\n            } else {\n                setTimeout(function() {\n                    callback(result);\n                });\n            }\n        }\n\n        // No acceptable tiles were set\n        if (acceptableTiles === undefined) {\n            throw new Error(\"You can't set a path without first calling setAcceptableTiles() on EasyStar.\");\n        }\n        // No grid was set\n        if (collisionGrid === undefined) {\n            throw new Error(\"You can't set a path without first calling setGrid() on EasyStar.\");\n        }\n\n        // Start or endpoint outside of scope.\n        if (startX < 0 || startY < 0 || endX < 0 || endY < 0 ||\n        startX > collisionGrid[0].length-1 || startY > collisionGrid.length-1 ||\n        endX > collisionGrid[0].length-1 || endY > collisionGrid.length-1) {\n            throw new Error(\"Your start or end point is outside the scope of your grid.\");\n        }\n\n        // Start and end are the same tile.\n        if (startX===endX && startY===endY) {\n            callbackWrapper([]);\n            return;\n        }\n\n        // End point is not an acceptable tile.\n        var endTile = collisionGrid[endY][endX];\n        var isAcceptable = false;\n        for (var i = 0; i < acceptableTiles.length; i++) {\n            if (endTile === acceptableTiles[i]) {\n                isAcceptable = true;\n                break;\n            }\n        }\n\n        if (isAcceptable === false) {\n            callbackWrapper(null);\n            return;\n        }\n\n        // Create the instance\n        var instance = new Instance();\n        instance.openList = new Heap(function(nodeA, nodeB) {\n            return nodeA.bestGuessDistance() - nodeB.bestGuessDistance();\n        });\n        instance.isDoneCalculating = false;\n        instance.nodeHash = {};\n        instance.startX = startX;\n        instance.startY = startY;\n        instance.endX = endX;\n        instance.endY = endY;\n        instance.callback = callbackWrapper;\n\n        instance.openList.push(coordinateToNode(instance, instance.startX,\n            instance.startY, null, STRAIGHT_COST));\n\n        instances.push(instance);\n    };\n\n    /**\n    * This method steps through the A* Algorithm in an attempt to\n    * find your path(s). It will search 4-8 tiles (depending on diagonals) for every calculation.\n    * You can change the number of calculations done in a call by using\n    * easystar.setIteratonsPerCalculation().\n    **/\n    this.calculate = function() {\n        if (instances.length === 0 || collisionGrid === undefined || acceptableTiles === undefined) {\n            return;\n        }\n        for (iterationsSoFar = 0; iterationsSoFar < iterationsPerCalculation; iterationsSoFar++) {\n            if (instances.length === 0) {\n                return;\n            }\n\n            if (syncEnabled) {\n                // If this is a sync instance, we want to make sure that it calculates synchronously.\n                iterationsSoFar = 0;\n            }\n\n            // Couldn't find a path.\n            if (instances[0].openList.size() === 0) {\n                var ic = instances[0];\n                ic.callback(null);\n                instances.shift();\n                continue;\n            }\n\n            var searchNode = instances[0].openList.pop();\n\n            // Handles the case where we have found the destination\n            if (instances[0].endX === searchNode.x && instances[0].endY === searchNode.y) {\n                instances[0].isDoneCalculating = true;\n                var path = [];\n                path.push({x: searchNode.x, y: searchNode.y});\n                var parent = searchNode.parent;\n                while (parent!=null) {\n                    path.push({x: parent.x, y:parent.y});\n                    parent = parent.parent;\n                }\n                path.reverse();\n                var ic = instances[0];\n                var ip = path;\n                ic.callback(ip);\n                return\n            }\n\n            var tilesToSearch = [];\n            searchNode.list = CLOSED_LIST;\n\n            if (searchNode.y > 0) {\n                tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                    x: 0, y: -1, cost: STRAIGHT_COST * getTileCost(searchNode.x, searchNode.y-1)});\n            }\n            if (searchNode.x < collisionGrid[0].length-1) {\n                tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                    x: 1, y: 0, cost: STRAIGHT_COST * getTileCost(searchNode.x+1, searchNode.y)});\n            }\n            if (searchNode.y < collisionGrid.length-1) {\n                tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                    x: 0, y: 1, cost: STRAIGHT_COST * getTileCost(searchNode.x, searchNode.y+1)});\n            }\n            if (searchNode.x > 0) {\n                tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                    x: -1, y: 0, cost: STRAIGHT_COST * getTileCost(searchNode.x-1, searchNode.y)});\n            }\n            if (diagonalsEnabled) {\n                if (searchNode.x > 0 && searchNode.y > 0) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y-1) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x-1, searchNode.y))) {\n\n                        tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                            x: -1, y: -1, cost: DIAGONAL_COST * getTileCost(searchNode.x-1, searchNode.y-1)});\n                    }\n                }\n                if (searchNode.x < collisionGrid[0].length-1 && searchNode.y < collisionGrid.length-1) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y+1) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x+1, searchNode.y))) {\n\n                        tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                            x: 1, y: 1, cost: DIAGONAL_COST * getTileCost(searchNode.x+1, searchNode.y+1)});\n                    }\n                }\n                if (searchNode.x < collisionGrid[0].length-1 && searchNode.y > 0) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y-1) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x+1, searchNode.y))) {\n\n\n                        tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                            x: 1, y: -1, cost: DIAGONAL_COST * getTileCost(searchNode.x+1, searchNode.y-1)});\n                    }\n                }\n                if (searchNode.x > 0 && searchNode.y < collisionGrid.length-1) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y+1) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x-1, searchNode.y))) {\n\n\n                        tilesToSearch.push({ instance: instances[0], searchNode: searchNode,\n                            x: -1, y: 1, cost: DIAGONAL_COST * getTileCost(searchNode.x-1, searchNode.y+1)});\n                    }\n                }\n            }\n\n            var isDoneCalculating = false;\n\n            // Search all of the surrounding nodes\n            for (var i = 0; i < tilesToSearch.length; i++) {\n                checkAdjacentNode(tilesToSearch[i].instance, tilesToSearch[i].searchNode,\n                    tilesToSearch[i].x, tilesToSearch[i].y, tilesToSearch[i].cost);\n                if (tilesToSearch[i].instance.isDoneCalculating === true) {\n                    isDoneCalculating = true;\n                    break;\n                }\n            }\n\n            if (isDoneCalculating) {\n                instances.shift();\n                continue;\n            }\n\n        }\n    };\n\n    // Private methods follow\n    var checkAdjacentNode = function(instance, searchNode, x, y, cost) {\n        var adjacentCoordinateX = searchNode.x+x;\n        var adjacentCoordinateY = searchNode.y+y;\n\n        if (pointsToAvoid[adjacentCoordinateX + \"_\" + adjacentCoordinateY] === undefined &&\n            isTileWalkable(collisionGrid, acceptableTiles, adjacentCoordinateX, adjacentCoordinateY, searchNode)) {\n            var node = coordinateToNode(instance, adjacentCoordinateX,\n                adjacentCoordinateY, searchNode, cost);\n\n            if (node.list === undefined) {\n                node.list = OPEN_LIST;\n                instance.openList.push(node);\n            } else if (searchNode.costSoFar + cost < node.costSoFar) {\n                node.costSoFar = searchNode.costSoFar + cost;\n                node.parent = searchNode;\n                instance.openList.updateItem(node);\n            }\n        }\n    };\n\n    // Helpers\n    var isTileWalkable = function(collisionGrid, acceptableTiles, x, y, sourceNode) {\n        if (directionalConditions[x + \"_\" + y]) {\n            var direction = calculateDirection(sourceNode.x - x, sourceNode.y - y)\n            var directionIncluded = function () {\n                for (var i = 0; i < directionalConditions[x + \"_\" + y].length; i++) {\n                    if (directionalConditions[x + \"_\" + y][i] === direction) return true\n                }\n                return false\n            }\n            if (!directionIncluded()) return false\n        }\n        for (var i = 0; i < acceptableTiles.length; i++) {\n            if (collisionGrid[y][x] === acceptableTiles[i]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    /**\n     * -1, -1 | 0, -1  | 1, -1\n     * -1,  0 | SOURCE | 1,  0\n     * -1,  1 | 0,  1  | 1,  1\n     */\n    var calculateDirection = function (diffX, diffY) {\n        if (diffX === 0, diffY === -1) return EasyStar.BOTTOM\n        else if (diffX === 1, diffY === -1) return EasyStar.BOTTOM_LEFT\n        else if (diffX === 1, diffY === 0) return EasyStar.LEFT\n        else if (diffX === 1, diffY === 1) return EasyStar.TOP_LEFT\n        else if (diffX === 0, diffY === 1) return EasyStar.TOP\n        else if (diffX === -1, diffY === 1) return EasyStar.TOP_RIGHT\n        else if (diffX === -1, diffY === 0) return EasyStar.RIGHT\n        else if (diffX === -1, diffY === -1) return EasyStar.BOTTOM_RIGHT\n        throw new Error('These differences are not valid: ' + diffX + ', ' + diffY)\n    };\n\n    var getTileCost = function(x, y) {\n        return pointsToCost[x + '_' + y] || costMap[collisionGrid[y][x]]\n    };\n\n    var coordinateToNode = function(instance, x, y, parent, cost) {\n        if (instance.nodeHash[x + \"_\" + y]!==undefined) {\n            return instance.nodeHash[x + \"_\" + y];\n        }\n        var simpleDistanceToTarget = getDistance(x, y, instance.endX, instance.endY);\n        if (parent!==null) {\n            var costSoFar = parent.costSoFar + cost;\n        } else {\n            costSoFar = 0;\n        }\n        var node = new Node(parent,x,y,costSoFar,simpleDistanceToTarget);\n        instance.nodeHash[x + \"_\" + y] = node;\n        return node;\n    };\n\n    var getDistance = function(x1,y1,x2,y2) {\n        if (diagonalsEnabled) {\n            // Octile distance\n            var dx = Math.abs(x1 - x2);\n            var dy = Math.abs(y1 - y2);\n            if (dx < dy) {\n                return DIAGONAL_COST * dx + dy;\n            } else {\n                return DIAGONAL_COST * dy + dx;\n            }\n        } else {\n            // Manhattan distance\n            var dx = Math.abs(x1 - x2);\n            var dy = Math.abs(y1 - y2);\n            return (dx + dy);\n        }\n    };\n}\n\nEasyStar.TOP = 'TOP'\nEasyStar.TOP_RIGHT = 'TOP_RIGHT'\nEasyStar.RIGHT = 'RIGHT'\nEasyStar.BOTTOM_RIGHT = 'BOTTOM_RIGHT'\nEasyStar.BOTTOM = 'BOTTOM'\nEasyStar.BOTTOM_LEFT = 'BOTTOM_LEFT'\nEasyStar.LEFT = 'LEFT'\nEasyStar.TOP_LEFT = 'TOP_LEFT'\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/easystarjs/src/easystar.js\n **/","/**\n * Represents a single instance of EasyStar.\n * A path that is in the queue to eventually be found.\n */\nmodule.exports = function() {\n    this.isDoneCalculating = true;\n    this.pointsToAvoid = {};\n    this.startX;\n    this.callback;\n    this.startY;\n    this.endX;\n    this.endY;\n    this.nodeHash = {};\n    this.openList;\n};\n\n\n/** WEBPACK FOOTER **\n ** ../~/easystarjs/src/instance.js\n **/","/**\n* A simple Node that represents a single tile on the grid.\n* @param {Object} parent The parent node.\n* @param {Number} x The x position on the grid.\n* @param {Number} y The y position on the grid.\n* @param {Number} costSoFar How far this node is in moves*cost from the start.\n* @param {Number} simpleDistanceToTarget Manhatten distance to the end point.\n**/\nmodule.exports = function(parent, x, y, costSoFar, simpleDistanceToTarget) {\n    this.parent = parent;\n    this.x = x;\n    this.y = y;\n    this.costSoFar = costSoFar;\n    this.simpleDistanceToTarget = simpleDistanceToTarget;\n\n    /**\n    * @return {Number} Best guess distance of a cost using this node.\n    **/\n    this.bestGuessDistance = function() {\n        return this.costSoFar + this.simpleDistanceToTarget;\n    }\n};\n\n\n/** WEBPACK FOOTER **\n ** ../~/easystarjs/src/node.js\n **/","module.exports = require('./lib/heap');\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/heap/index.js\n **/","// Generated by CoffeeScript 1.8.0\n(function() {\n  var Heap, defaultCmp, floor, heapify, heappop, heappush, heappushpop, heapreplace, insort, min, nlargest, nsmallest, updateItem, _siftdown, _siftup;\n\n  floor = Math.floor, min = Math.min;\n\n\n  /*\n  Default comparison function to be used\n   */\n\n  defaultCmp = function(x, y) {\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n    return 0;\n  };\n\n\n  /*\n  Insert item x in list a, and keep it sorted assuming a is sorted.\n  \n  If x is already in a, insert it to the right of the rightmost x.\n  \n  Optional args lo (default 0) and hi (default a.length) bound the slice\n  of a to be searched.\n   */\n\n  insort = function(a, x, lo, hi, cmp) {\n    var mid;\n    if (lo == null) {\n      lo = 0;\n    }\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (lo < 0) {\n      throw new Error('lo must be non-negative');\n    }\n    if (hi == null) {\n      hi = a.length;\n    }\n    while (lo < hi) {\n      mid = floor((lo + hi) / 2);\n      if (cmp(x, a[mid]) < 0) {\n        hi = mid;\n      } else {\n        lo = mid + 1;\n      }\n    }\n    return ([].splice.apply(a, [lo, lo - lo].concat(x)), x);\n  };\n\n\n  /*\n  Push item onto heap, maintaining the heap invariant.\n   */\n\n  heappush = function(array, item, cmp) {\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    array.push(item);\n    return _siftdown(array, 0, array.length - 1, cmp);\n  };\n\n\n  /*\n  Pop the smallest item off the heap, maintaining the heap invariant.\n   */\n\n  heappop = function(array, cmp) {\n    var lastelt, returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    lastelt = array.pop();\n    if (array.length) {\n      returnitem = array[0];\n      array[0] = lastelt;\n      _siftup(array, 0, cmp);\n    } else {\n      returnitem = lastelt;\n    }\n    return returnitem;\n  };\n\n\n  /*\n  Pop and return the current smallest value, and add the new item.\n  \n  This is more efficient than heappop() followed by heappush(), and can be\n  more appropriate when using a fixed size heap. Note that the value\n  returned may be larger than item! That constrains reasonable use of\n  this routine unless written as part of a conditional replacement:\n      if item > array[0]\n        item = heapreplace(array, item)\n   */\n\n  heapreplace = function(array, item, cmp) {\n    var returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    returnitem = array[0];\n    array[0] = item;\n    _siftup(array, 0, cmp);\n    return returnitem;\n  };\n\n\n  /*\n  Fast version of a heappush followed by a heappop.\n   */\n\n  heappushpop = function(array, item, cmp) {\n    var _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (array.length && cmp(array[0], item) < 0) {\n      _ref = [array[0], item], item = _ref[0], array[0] = _ref[1];\n      _siftup(array, 0, cmp);\n    }\n    return item;\n  };\n\n\n  /*\n  Transform list into a heap, in-place, in O(array.length) time.\n   */\n\n  heapify = function(array, cmp) {\n    var i, _i, _j, _len, _ref, _ref1, _results, _results1;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    _ref1 = (function() {\n      _results1 = [];\n      for (var _j = 0, _ref = floor(array.length / 2); 0 <= _ref ? _j < _ref : _j > _ref; 0 <= _ref ? _j++ : _j--){ _results1.push(_j); }\n      return _results1;\n    }).apply(this).reverse();\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      i = _ref1[_i];\n      _results.push(_siftup(array, i, cmp));\n    }\n    return _results;\n  };\n\n\n  /*\n  Update the position of the given item in the heap.\n  This function should be called every time the item is being modified.\n   */\n\n  updateItem = function(array, item, cmp) {\n    var pos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    pos = array.indexOf(item);\n    if (pos === -1) {\n      return;\n    }\n    _siftdown(array, 0, pos, cmp);\n    return _siftup(array, pos, cmp);\n  };\n\n\n  /*\n  Find the n largest elements in a dataset.\n   */\n\n  nlargest = function(array, n, cmp) {\n    var elem, result, _i, _len, _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    result = array.slice(0, n);\n    if (!result.length) {\n      return result;\n    }\n    heapify(result, cmp);\n    _ref = array.slice(n);\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      elem = _ref[_i];\n      heappushpop(result, elem, cmp);\n    }\n    return result.sort(cmp).reverse();\n  };\n\n\n  /*\n  Find the n smallest elements in a dataset.\n   */\n\n  nsmallest = function(array, n, cmp) {\n    var elem, i, los, result, _i, _j, _len, _ref, _ref1, _results;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (n * 10 <= array.length) {\n      result = array.slice(0, n).sort(cmp);\n      if (!result.length) {\n        return result;\n      }\n      los = result[result.length - 1];\n      _ref = array.slice(n);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elem = _ref[_i];\n        if (cmp(elem, los) < 0) {\n          insort(result, elem, 0, null, cmp);\n          result.pop();\n          los = result[result.length - 1];\n        }\n      }\n      return result;\n    }\n    heapify(array, cmp);\n    _results = [];\n    for (i = _j = 0, _ref1 = min(n, array.length); 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n      _results.push(heappop(array, cmp));\n    }\n    return _results;\n  };\n\n  _siftdown = function(array, startpos, pos, cmp) {\n    var newitem, parent, parentpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    newitem = array[pos];\n    while (pos > startpos) {\n      parentpos = (pos - 1) >> 1;\n      parent = array[parentpos];\n      if (cmp(newitem, parent) < 0) {\n        array[pos] = parent;\n        pos = parentpos;\n        continue;\n      }\n      break;\n    }\n    return array[pos] = newitem;\n  };\n\n  _siftup = function(array, pos, cmp) {\n    var childpos, endpos, newitem, rightpos, startpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    endpos = array.length;\n    startpos = pos;\n    newitem = array[pos];\n    childpos = 2 * pos + 1;\n    while (childpos < endpos) {\n      rightpos = childpos + 1;\n      if (rightpos < endpos && !(cmp(array[childpos], array[rightpos]) < 0)) {\n        childpos = rightpos;\n      }\n      array[pos] = array[childpos];\n      pos = childpos;\n      childpos = 2 * pos + 1;\n    }\n    array[pos] = newitem;\n    return _siftdown(array, startpos, pos, cmp);\n  };\n\n  Heap = (function() {\n    Heap.push = heappush;\n\n    Heap.pop = heappop;\n\n    Heap.replace = heapreplace;\n\n    Heap.pushpop = heappushpop;\n\n    Heap.heapify = heapify;\n\n    Heap.updateItem = updateItem;\n\n    Heap.nlargest = nlargest;\n\n    Heap.nsmallest = nsmallest;\n\n    function Heap(cmp) {\n      this.cmp = cmp != null ? cmp : defaultCmp;\n      this.nodes = [];\n    }\n\n    Heap.prototype.push = function(x) {\n      return heappush(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pop = function() {\n      return heappop(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.peek = function() {\n      return this.nodes[0];\n    };\n\n    Heap.prototype.contains = function(x) {\n      return this.nodes.indexOf(x) !== -1;\n    };\n\n    Heap.prototype.replace = function(x) {\n      return heapreplace(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pushpop = function(x) {\n      return heappushpop(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.heapify = function() {\n      return heapify(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.updateItem = function(x) {\n      return updateItem(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.clear = function() {\n      return this.nodes = [];\n    };\n\n    Heap.prototype.empty = function() {\n      return this.nodes.length === 0;\n    };\n\n    Heap.prototype.size = function() {\n      return this.nodes.length;\n    };\n\n    Heap.prototype.clone = function() {\n      var heap;\n      heap = new Heap();\n      heap.nodes = this.nodes.slice(0);\n      return heap;\n    };\n\n    Heap.prototype.toArray = function() {\n      return this.nodes.slice(0);\n    };\n\n    Heap.prototype.insert = Heap.prototype.push;\n\n    Heap.prototype.top = Heap.prototype.peek;\n\n    Heap.prototype.front = Heap.prototype.peek;\n\n    Heap.prototype.has = Heap.prototype.contains;\n\n    Heap.prototype.copy = Heap.prototype.clone;\n\n    return Heap;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof exports === 'object') {\n      return module.exports = factory();\n    } else {\n      return root.Heap = factory();\n    }\n  })(this, function() {\n    return Heap;\n  });\n\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/heap/lib/heap.js\n **/","const scheduler = new ROT.Scheduler.Action()\nconst PAUSE_RETRY = 250\nlet pauseCount = 0\n\nexport default {\n    ticked: new Phaser.Signal(),\n    start: function () {\n        this._tick()\n    },\n    addActor: function (actor) {\n        scheduler.add(actor, true)\n    },\n    pause: function () {\n        pauseCount++\n    },\n    continue: function () {\n        pauseCount--\n    },\n    _tick: function () {\n        if (pauseCount > 0) {\n            console.log('scheduling paused')\n            return setTimeout(this._tick, PAUSE_RETRY)\n        }\n\n        const current = scheduler.next()\n        current.act()\n            .then(duration => {\n                console.log(`action completed, ${duration} ${scheduler.getTime()}`)\n                scheduler.setDuration(duration)\n                this.ticked.dispatch()\n                this._tick()\n            }).catch((reason) => {\n                console.log(`action failed: ${reason}`)\n                scheduler.setDuration(0)\n                debugger\n                // this._tick()\n            })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services/scheduling.js\n **/","const initialContext = {\n    input: {\n        isBlocked: false\n    },\n    player: {\n        health: 10,\n        speed: 10,\n        position: {\n            x: 2,\n            y: 2\n        },\n        destinationPath: []\n    },\n    enemies: {}\n}\n\nexport default {\n    init: game => {\n        game.context = initialContext\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services/gameContext.js\n **/","import pathfinding from './pathfinding'\n\nfunction getTile (level, x, y) {\n    const row = level.map.layer.data[y]\n    if (!row) return\n\n    const tile = row[x]\n    return tile\n}\n\nexport default {\n    update: (player, level) => {\n        level.map.layer.data.forEach((row) => {\n            row.forEach((tile) => {\n                tile.properties.visible = false\n            })\n        })\n        const playerTile = pathfinding.pointToTile(pathfinding.getCenteredPosition(player))\n\n        const fov = new ROT.FOV.PreciseShadowcasting((x, y) => {\n            const tile = getTile(level, x, y)\n            if (!tile) return false\n\n            return ((tile.properties.walkable && !tile.properties.blockLOS) || (x === playerTile.x && y === playerTile.y))\n        })\n\n        fov.compute(playerTile.x, playerTile.y, 10, (x, y, r, visibility) => {\n            const tile = getTile(level, x, y)\n            if (!tile) return\n\n            tile.properties.visible = true\n            tile.properties.revealed = true\n        })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services/visibility.js\n **/","import MoveAction from './MoveAction'\nimport PauseForInputAction from './PauseForInputAction'\nimport WaitAction from './WaitAction'\n\nexport default {\n    move: (game, actor, data) => {\n        return new MoveAction(game, actor, data)\n    },\n    pauseForInput: (game, actor) => {\n        return new PauseForInputAction(game, actor)\n    },\n    wait: (game, actor) => {\n        return new WaitAction(game, actor)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actions/index.js\n **/","import _Action from './_Action'\nimport services from '../services'\n\nexport default class MoveAction extends _Action {\n    _execute () {\n        console.log('executing MoveAction')\n        const pathfinder = services.pathfinding()\n\n        return new Promise((resolve, reject) => {\n            this.path = this.payload.destinationPath\n\n            if (this.path.length < 2) { // at the end of the path\n                this.path.shift()\n                return resolve(this.actor.moveSpeed)\n            }\n\n            const angle = Phaser.Math.radToDeg(Phaser.Math.angleBetweenPoints(this.path[0], this.path[1]))\n            this.actor.moveAngle(angle).then(() => {\n                this.path.shift()\n                resolve(this.actor.moveSpeed)\n            })\n        })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actions/MoveAction.js\n **/","export default class _Action {\n    constructor (game, actor, payload) {\n        this.game = game\n        this.actor = actor\n        this.payload = payload\n    }\n\n    execute () {\n        return this._execute()\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actions/_Action.js\n **/","import _Action from './_Action'\n\nconst DURATION = 0\n\nexport default class PauseForInputAction extends _Action {\n    _execute () {\n        console.log('executing PauseForInputAction')\n        return new Promise(resolve => setTimeout(() => resolve(DURATION), 200))\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actions/PauseForInputAction.js\n **/","import _Action from './_Action'\n\nconst DURATION = 10\n\nexport default class WaitAction extends _Action {\n    _execute () {\n        return new Promise(resolve => resolve(DURATION))\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actions/WaitAction.js\n **/","import _Actor from './_Actor';\nimport behaviors from '../behaviors'\nimport services from '../services'\n\nexport default class Rat extends _Actor {\n    constructor (game, sprite) {\n        super(game, sprite, behaviors.player(game));\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/actors/Rat.js\n **/","import PlayerSprite from './PlayerSprite'\nimport RatSprite from './RatSprite'\nimport ChestSprite from './ChestSprite'\n\nmodule.exports = {\n    player: function player (game, x, y) {\n        return new PlayerSprite(game, x, y)\n    },\n\n    rat: function rat (game, x, y) {\n        return new RatSprite(game, x, y)\n    },\n\n    chest: function chest (game, x, y) {\n        return new ChestSprite(game, x, y)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sprites/index.js\n **/","import _Sprite from './_Sprite'\nimport constants from '../constants'\n\nexport default class PlayerSprite extends _Sprite {\n    constructor (game, x, y) {\n        super(game, x, y, constants.SPRITEKEY)\n\n        game.physics.enable(this)\n        this.animations.add('idle', [0,0,0])\n        this.animations.add('walk', [0,0,0])\n        this.animations.add('walkUp', [0,0,0])\n        this.animations.add('attack', [0,0,0])\n        this.animations.play('idle')\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sprites/PlayerSprite.js\n **/","import constants from '../constants'\n\nconst anchorX = 0.5\nconst anchorY = 0\n\nexport default class _Sprite extends Phaser.Sprite {\n    constructor (game, x, y, key, frame) {\n        // account for anchor\n        const adjustedX = x + (constants.TILEWIDTH * anchorX)\n        const adjustedY = y + (constants.TILEHEIGHT * anchorY)\n\n        super(game, adjustedX, adjustedY, key, frame)\n        this.anchor.setTo(anchorX, anchorY)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sprites/_Sprite.js\n **/","import _Sprite from './_Sprite'\nimport constants from '../constants'\n\nexport default class RatSprite extends _Sprite {\n    constructor (game, x, y) {\n        super(game, x, y, constants.SPRITEKEY)\n\n        game.physics.enable(this)\n        this.animations.add('idle', [1])\n        this.animations.add('walk', [1])\n        this.animations.add('walkUp', [1])\n        this.animations.add('attack', [1])\n        this.animations.play('idle')\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sprites/RatSprite.js\n **/","import _Sprite from './_Sprite'\nimport constants from '../constants'\n\nexport default class ChestSprite extends _Sprite {\n    constructor (game, x, y) {\n        super(game, x, y, constants.SPRITEKEY)\n\n        game.physics.enable(this)\n        this.animations.add('idle', [14])\n        this.animations.play('idle')\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sprites/ChestSprite.js\n **/","import PrefabLevel from './PrefabLevel'\n\n// provides a level\nfunction getLevel (game, levelConfig) {\n    if (levelConfig) {\n        // TODO: build a level given config params\n    } else {\n        // provide the default level\n        return buildPrefabLevel(game, 'testingGrounds')\n    }\n}\n\nfunction buildPrefabLevel (game, levelName) {\n    return new PrefabLevel(game, levelName)\n}\n\nexport default {\n    getLevel\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/levels/index.js\n **/","import Level from './_Level'\n\nexport default class PrefabLevel extends Level {\n    constructor (game, levelName) {\n        super(game)\n        this.levelName = levelName\n    }\n\n    _subAddMap () {\n        this.map = this.game.add.tilemap(this.levelName)\n        let layers = []\n\n        this.map.tilesets.forEach(tileSet => {\n            this.map.addTilesetImage(tileSet.name)\n        })\n\n        this.map.layers.forEach(layer => {\n            layers.push(this.map.createLayer(layer.name))\n        })\n\n        layers[0].resizeWorld()\n\n        return this.map\n    }\n\n    getWalkables () {\n        const walkables = []\n\n        this.map.tilesets.forEach(tileSet => {\n            for (var prop in tileSet.tileProperties) {\n                if (tileSet.tileProperties.hasOwnProperty(prop)) {\n                    const tileGid = prop + tileSet.firstgid\n                    if (tileSet.tileProperties[prop].walkable) {\n                        walkables.push(parseInt(prop, 10) + tileSet.firstgid)\n                    }\n                }\n            }\n        })\n\n        return walkables\n    }\n\n    getGrid () {\n        return this.map.layers[0].data.map(row => row.map(column => column.index))\n    }\n\n    getPlayerPosition () {\n        return this.findObjectsByName('player')[0]\n    }\n\n    getEnemies () {\n        return this.findObjectsByType('enemy')\n    }\n\n    getItems () {\n        return this.findObjectsByType('item')\n    }\n\n    isTileVisible (x, y) {\n        return this.map.layer.data[y][x].properties.visible\n    }\n\n    findObjectsByType (objectType) {\n        return this.map.objects.objectLayer.filter((obj) => {\n            return obj.type === objectType\n        })\n    }\n\n    findObjectsByName (objectName) {\n        return this.map.objects.objectLayer.filter((obj) => {\n            return obj.name === objectName\n        })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/levels/PrefabLevel.js\n **/","// assumptions:\n//  - layer1 has all blocking tiles\n\nexport default class _Level {\n    constructor (game) {\n        this.game = game\n    }\n\n    addMap () {\n        if (this._subAddMap) this._subAddMap()\n    }\n\n    _getWalkables () {\n        this.map.tiles.forEach(tile)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/levels/_Level.js\n **/","import Enemies from './Enemies';\nimport Items from './Items';\n\nmodule.exports = {\n    enemies: function enemies (game) {\n        return new Enemies(game);\n    },\n    items: function items (game) {\n        return new Items(game);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/groups/index.js\n **/","import constants from '../constants'\nimport actors from '../actors'\n\nexport default class Enemies extends Phaser.Group {\n    constructor (game) {\n        super(game)\n    }\n\n    initEnemy (enemyObj) {\n        const { name, x, y } = enemyObj\n        actors[name](this.game, x, y, this)\n    }\n\n    initEnemies (enemyObjs) {\n        enemyObjs.forEach((enemyObj) => {\n            this.initEnemy(enemyObj)\n        })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/groups/Enemies.js\n **/","import constants from '../constants'\nimport items from '../items'\n\nexport default class Enemies extends Phaser.Group {\n    constructor (game) {\n        super(game)\n    }\n\n    initItem (itemObj) {\n        const { name, x, y } = itemObj\n        items[name](this.game, x, y, this)\n    }\n\n    initItems (itemObjs) {\n        itemObjs.forEach((itemObj) => {\n            this.initItem(itemObj)\n        })\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/groups/Items.js\n **/","import Chest from './Chest'\nimport Sprites from '../sprites'\n\nmodule.exports = {\n    chest: function chest (game, x, y, group = null) {\n        var sprite = Sprites.chest(game, x, y)\n        var chest = new Chest(game, sprite)\n\n        if (group) {\n            group.add(chest.sprite)\n        }\n\n        return chest\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/items/index.js\n **/","import _Item from './_Item'\n\nexport default class Chest extends _Item {\n    constructor (game, sprite, contents, isOpen = false) {\n        super(game, sprite)\n\n        this.isOpen = isOpen\n\n        if (contents) {\n            this.contents = contents\n        }\n    }\n\n    setContents (contents) {\n        this.contents = contents\n    }\n\n    getContents () {\n        return this.contents\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/items/Chest.js\n **/","export default class _Item {\n    constructor (game, sprite) {\n        this.game = game\n        this.sprite = sprite\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/items/_Item.js\n **/","import _State from './_State';\nimport Fonts from '../fonts';\nimport Sprites from '../sprites';\nimport constants from '../constants'\nimport ui from '../ui'\nexport default class Loading extends _State {\n    init () {\n        // Pixel-perfect canvas scaling!\n        // Thanks to http://www.belenalbeza.com/retro-crisp-pixel-art-in-phaser/\n        this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n        this.game.scale.pageAlignHorizontally = true;\n        this.game.scale.pageAlignVertically = true;\n\n        // Rounds x/y positions to the nearest whole to avoid sub-pixel rendering\n        this.game.renderer.renderSession.roundPixels = true;\n\n        // Sets browser-prefixed \"image-rendering\" CSS property on the game canvas\n        Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);\n\n        // Prevent these keys from being handled by the browser\n        // when the game is in focus\n        this.game.input.keyboard.addKeyCapture(Phaser.Keyboard.SPACEBAR);\n    }\n\n    preload () {\n        ui.load(this.game, () => {\n            this.stateProvider.menu(this.state);\n        })\n\n        Fonts.loadResources(this);\n\n        this.game.load.image('tiles', 'assets/16x16/simpleGraphics_tiles16x16.png');\n        this.game.load.image('new', 'assets/16x16/retro_tiles.png');\n        this.game.load.tilemap('testingGrounds', 'assets/testingGrounds.json', null, Phaser.Tilemap.TILED_JSON);\n        this.game.load.spritesheet(constants.SPRITEKEY, 'assets/16x16/retro_tiles.png', constants.TILEWIDTH, constants.TILEHEIGHT)\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Loading.js\n **/","import MenuFont from './MenuFont';\n\nmodule.exports = {\n    loadResources: function loadResources (loader) {\n        MenuFont.loadResource(loader);\n    },\n\n    menu: function menu (game, x, y, text, size, align, group) {\n        var font = new MenuFont(game, x, y, text, size, align);\n\n        if (group) {\n            group.add(font);\n        }\n\n        return font;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/fonts/index.js\n **/","import _BitmapFont from './_BitmapFont';\n\nconst KEY = 'apple';\nconst FONT = '/assets/fonts/apple.png';\nconst MAP = '/assets/fonts/apple.fnt';\n\nexport default class MenuFont extends _BitmapFont {\n    static loadResource (loader) {\n        loader.load.bitmapFont(KEY, FONT, MAP);\n    }\n\n    constructor (game, x, y, text, size, align) {\n        super(game, x, y, KEY, text, size, align);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/fonts/MenuFont.js\n **/","export default class _BitmapFont extends Phaser.BitmapText {\n    constructor (game, x, y, font, text, size, align) {\n        super(game, x, y, font, text, size, align);\n    }\n\n    /**\n    * @override Phaser.BitmapText._align\n    */\n    set _align (value) {\n        this.__align = value;\n        switch (value) {\n            case 'center':\n            this.anchor.x = 0.5;\n            this.anchor.y = 0.5;\n            break;\n            case 'right':\n            this.anchor.x = 1;\n            this.anchor.y = 0.5;\n            break;\n            case 'left':\n            default:\n            this.anchor.x = 0;\n            this.anchor.y = 0.5;\n            break;\n        }\n    }\n\n    get _align () {\n        return this.__align;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/fonts/_BitmapFont.js\n **/","import menuDefinition from './components/menu'\n\nlet menuScreen\n\nexport default {\n    load: (game, callback) => {\n        const uiAssets = [\n            './images/btn-line.png',\n            './images/btn-line-down.png'\n        ]\n\n        uiAssets.forEach((asset) => {\n            game.load.image(asset, `assets/ui-theme/${asset}`)\n        })\n\n        game.load.onLoadComplete.add(() => {\n            EZGUI.Compatibility.fixCache.call(game.load, uiAssets)\n\n            EZGUI.Theme.load(['assets/ui-theme/ui-theme.json'], () => {\n                menuScreen = EZGUI.create(menuDefinition, 'ui-theme')\n\n                callback()\n            })\n        })\n    },\n\n    menu: {\n        onStart: (cb) => {\n            EZGUI.components.startBtn.on('click', () => {\n                cb()\n                menuScreen.visible = false\n            })\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/ui/index.js\n **/","export default {\n    id: 'menu',\n    component: 'Window',\n    // header: { position: { x: 0, y: 0 }, height: 40, text: 'HEADER' },\n    draggable: false,\n    position: { x: 20, y: 20 },\n    width: 344,\n    height: 200,\n\n    layout: [1, 3],\n    children: [\n        {\n            id: 'label',\n            component: 'Label',\n            position: 'center',\n            text: 'WELCOME TO DUNGEON EXPLORER',\n            width: 340,\n            height: 50\n        },\n\n        null,\n\n        {\n            id: 'startBtn',\n            component: 'Button',\n            position: 'center',\n            text: 'EXPLORE',\n            width: 100,\n            height: 40\n        }\n    ]\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/ui/components/menu.js\n **/","import _State from './_State';\nimport Fonts from '../fonts';\nimport ui from '../ui'\n\nexport default class Menu extends _State {\n    create () {\n        // this.titleText = this.createTitleText(this.world.centerX, 40);\n        // this.actionText = this.createActionText(this.world.centerX, 120);\n        // this.time.events.loop(1000, () => {\n        //     this.actionText.visible = Boolean(!this.actionText.visible);\n        // });\n        ui.menu.onStart(() => {\n            this.stateProvider.gameplay(this.state)\n        })\n    }\n\n    // createTitleText (x, y) {\n    //     return Fonts.menu(this.game, x, y, 'DUNGEON EXPLORER\\r\\nHEADER\\r\\nSTART', 8, 'center', this.world);\n    // }\n    //\n    // createActionText (x, y) {\n    //     return Fonts.menu(this.game, x, y, 'PRESS SPACE\\r\\nTO BEGIN EXPLORING', 8, 'center', this.world);\n    // }\n\n    // update () {\n    //     if (this.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)) {\n    //         this.stateProvider.gameplay(this.state);\n    //     }\n    // }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Menu.js\n **/"],"sourceRoot":""}